<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
</head>
<body>
  <div class="top-resizer"></div> <!-- é¡¶éƒ¨æ‹–åŠ¨æ¡ -->
  <div class="md-sidebar">
    <div class="sidebar-header dragable-md-editor">
      <h3 class="md-sidebar-title"><span id="md-sidebar-close" class="md-sidebar-close" class="icon">âŒ&nbsp;</span>ç¬”è®°æœ¬<span class="icon">ğŸ“’</span></h3>
      <div class="view-controls">
        <button id="toggleFileExplorer"  class="view-control-btn active" title="æ˜¾ç¤º/éšè—æ–‡ä»¶ç›®å½•">
          <span class="icon">ğŸ“</span>
        </button>
        <button id="toggleEditor" class="view-control-btn active" title="æ˜¾ç¤º/éšè—ç¼–è¾‘å™¨">
          <span class="icon">âœï¸</span>
        </button>
        <button id="togglePreview" class="view-control-btn active" title="æ˜¾ç¤º/éšè—é¢„è§ˆ">
          <span class="icon">ğŸ‘ï¸</span>
        </button>

      </div>
      <div class="size-controls">
        <button id="sizeSmall" class="size-btn" title="å°å°ºå¯¸ (30%)">S</button>
        <button id="sizeMedium" class="size-btn active" title="ä¸­ç­‰å°ºå¯¸ (50%)">M</button>
        <button id="sizeLarge" class="size-btn" title="å¤§å°ºå¯¸ (70%)">L</button>
        <button id="sizeFull" class="size-btn" title="å…¨å± (90%)">F</button>
      </div>
    </div>
    <div class="main-container">
      <div id="fileExplorerSection" class="section file-explorer-section">
        <div class="file-explorer-header">
          <button id="openFolderBtn" class="control-btn">
            <span class="icon">ğŸ“</span>
            æ‰“å¼€æ–‡ä»¶å¤¹
          </button>
        </div>
        <div id="fileTree" class="md-file-tree"></div>
      </div>
      <div class="resizer file-explorer-resizer"></div>
      <div id="editorSection" class="section editor-section">
        <div class="editor-left-resizer"></div>
        <div class="editor-toolbar">
            <div class="heading-dropdown">
                <button class="toolbar-btn" title="æ ‡é¢˜" data-format="heading">H</button>
                <div class="heading-menu">
                    <button class="heading-item" data-level="1">H1</button>
                    <button class="heading-item" data-level="2">H2</button>
                    <button class="heading-item" data-level="3">H3</button>
                    <button class="heading-item" data-level="4">H4</button>
                    <button class="heading-item" data-level="5">H5</button>
                    <button class="heading-item" data-level="6">H6</button>
                </div>
            </div>
            <button class="toolbar-btn" title="ç²—ä½“" data-format="bold">B</button>
            <button class="toolbar-btn" title="æ–œä½“" data-format="italic">I</button>
            <button class="toolbar-btn" title="é“¾æ¥" data-format="link">ğŸ”—</button>
            <button class="toolbar-btn" title="å›¾ç‰‡" data-format="image">ğŸ“·</button>
            <button class="toolbar-btn" title="ä»£ç å—" data-format="code">ğŸ“</button>
            <button class="toolbar-btn" title="æ— åºåˆ—è¡¨" data-format="ul">â€¢</button>
            <button class="toolbar-btn" title="æœ‰åºåˆ—è¡¨" data-format="ol">1.</button>
            <button class="toolbar-btn" title="ä»»åŠ¡åˆ—è¡¨" data-format="task">â˜</button>
            <button class="toolbar-btn" title="è¡¨æ ¼" data-format="table">ğŸ“Š</button>
            <button class="toolbar-btn" title="å¼•ç”¨" data-format="quote">â</button>
            <button class="toolbar-btn" title="åˆ†å‰²çº¿" data-format="hr">â€”</button>
        </div>
        <textarea id="notepad" placeholder="åœ¨è¿™é‡Œå†™ä¸‹ä½ çš„Markdownç¬”è®°..."></textarea>
      </div>
      <div class="resizer editor-resizer"></div>
      <div id="previewSection" class="section preview-section markdown-body">
        <div class="preview-left-resizer"></div>
        <div id="preview"></div>
      </div>
    </div>
    <div class="button-group">
      <div class="save-buttons">
        <button id="saveBtn" class="control-btn">
          <span class="icon">ğŸ’¾</span>
          ä¿å­˜
        </button>
        <button id="saveAsBtn" class="control-btn">
          <span class="icon">ğŸ“¥</span>
          å¦å­˜ä¸º
        </button>
        <button id="createNewArticle" class="control-btn my-control-btn">
          <span class="icon">âœï¸</span>
          åˆ›å»ºæ–°ç¬”è®°
        </button>
        <button id="md-deepseekToMarkdown" class="control-btn">
          <span class="icon">ğŸ¼</span>
          å¯¼å…¥deepseek
        </button>
        <button id="md-chatgptTomarkdown" class="control-btn">
          <span class="icon">ğŸ¤–</span>
          å¯¼å…¥chatgpt
        </button>
        <div class="view-controls">
          <button id="toggleFloatingBallGlobal" class="view-control-btn" title="æ˜¾ç¤º/éšè—æ‚¬æµ®æŒ‰é’®">
            <span class="icon">âš™ï¸</span>
          </button>
        </div>
      </div>
    </div>
    <div class="sidebar-resizer"></div>
  </div>

  <div id="contextMenu" class="context-menu">
    <div class="menu-item" data-action="rename">
        <span class="menu-icon">âœï¸</span>
        é‡å‘½å
    </div>
    <div class="menu-item" data-action="duplicate">
        <span class="menu-icon">ğŸ“‹</span>
        å¤åˆ¶
    </div>
    <div class="menu-item" data-action="delete">
        <span class="menu-icon">ğŸ—‘ï¸</span>
        åˆ é™¤
    </div>
  </div>

  <script src="marked.min.js"></script>
  <script src="fileTree.js"></script>
  <script src="sidebar.js"></script>
  <script src="floatingBall.js"></script>
  <script>
    // ç­‰å¾… DOM åŠ è½½å®Œæˆ
    document.addEventListener('DOMContentLoaded', function() {
      // è·å–æŒ‰é’®å…ƒç´ 
      const saveBtn = document.getElementById('saveBtn');
      const saveAsBtn = document.getElementById('saveAsBtn');

      // ä¿å­˜æŒ‰é’®ç‚¹å‡»äº‹ä»¶
      saveBtn.addEventListener('click', function() {
        const content = document.getElementById('notepad').value;
        if (!content.trim()) {
          alert('ç¬”è®°å†…å®¹ä¸èƒ½ä¸ºç©ºï¼');
          return;
        }
        downloadFile('note.md', content);
      });

      // å¦å­˜ä¸ºæŒ‰é’®ç‚¹å‡»äº‹ä»¶
      saveAsBtn.addEventListener('click', function() {
        const content = document.getElementById('notepad').value;
        if (!content.trim()) {
          alert('ç¬”è®°å†…å®¹ä¸èƒ½ä¸ºç©ºï¼');
          return;
        }
        
  
        
        if (!fileName.toLowerCase().endsWith('.md')) {
          alert('æ–‡ä»¶åå¿…é¡»ä»¥.mdç»“å°¾');
          return;
        }
        
        downloadFile(fileName, content);
      });

      // ä¸‹è½½æ–‡ä»¶å‡½æ•°
      function downloadFile(fileName, content) {
        const blob = new Blob([content], { type: 'text/markdown' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }
    });
  </script>
</body>
</html> 